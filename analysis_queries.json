{
  "last_3_days": "numericFields = (r) => r[\"_field\"] == \"celsius\" or r[\"_field\"] == \"lux\" or r[\"_field\"] == \"ph\" or r[\"_field\"] == \"voltage\"\nmanualFields = (r) => r[\"_field\"] == \"no3\" or r[\"_field\"] == \"no2\" or r[\"_field\"] == \"gh\" or r[\"_field\"] == \"kh\" or r[\"_field\"] == \"cl2\" or r[\"_field\"] == \"po4\"\n\nsensors = from(bucket: \"reef-data\")\n  |> range(start: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensor_readings\")\n  |> filter(fn: numericFields)\n  |> aggregateWindow(every: 6h, fn: mean, createEmpty: false)\n\nevents = from(bucket: \"reef-data\")\n  |> range(start: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"device_events\")\n  |> group(columns: [\"device_type\", \"device_id\", \"_field\"])\n  |> aggregateWindow(every: 6h, fn: last, createEmpty: false)\n\nsettings = from(bucket: \"reef-data\")\n  |> range(start: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"settings\")\n  |> group(columns: [\"setting_group\", \"setting_name\", \"_field\"])\n  |> aggregateWindow(every: 6h, fn: last, createEmpty: false)\n\nmanual = from(bucket: \"reef-data\")\n  |> range(start: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"water_quality_manual\")\n  |> filter(fn: manualFields)\n  |> aggregateWindow(every: 6h, fn: mean, createEmpty: false)\n\nunion(tables: [sensors, events, settings, manual])",
  "last_week": "numericFields = (r) => r[\"_field\"] == \"celsius\" or r[\"_field\"] == \"lux\" or r[\"_field\"] == \"ph\" or r[\"_field\"] == \"voltage\"\nmanualFields = (r) => r[\"_field\"] == \"no3\" or r[\"_field\"] == \"no2\" or r[\"_field\"] == \"gh\" or r[\"_field\"] == \"kh\" or r[\"_field\"] == \"cl2\" or r[\"_field\"] == \"po4\"\n\nsensors = from(bucket: \"reef-data\")\n  |> range(start: -7d, stop: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensor_readings\")\n  |> filter(fn: numericFields)\n  |> aggregateWindow(every: 1d, fn: mean, createEmpty: false)\n\nevents = from(bucket: \"reef-data\")\n  |> range(start: -7d, stop: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"device_events\")\n  |> group(columns: [\"device_type\", \"device_id\", \"_field\"])\n  |> aggregateWindow(every: 1d, fn: last, createEmpty: false)\n\nsettings = from(bucket: \"reef-data\")\n  |> range(start: -7d, stop: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"settings\")\n  |> group(columns: [\"setting_group\", \"setting_name\", \"_field\"])\n  |> aggregateWindow(every: 1d, fn: last, createEmpty: false)\n\nmanual = from(bucket: \"reef-data\")\n  |> range(start: -7d, stop: -3d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"water_quality_manual\")\n  |> filter(fn: manualFields)\n  |> aggregateWindow(every: 1d, fn: mean, createEmpty: false)\n\nunion(tables: [sensors, events, settings, manual])",
  "last_month": "numericFields = (r) => r[\"_field\"] == \"celsius\" or r[\"_field\"] == \"lux\" or r[\"_field\"] == \"ph\" or r[\"_field\"] == \"voltage\"\nmanualFields = (r) => r[\"_field\"] == \"no3\" or r[\"_field\"] == \"no2\" or r[\"_field\"] == \"gh\" or r[\"_field\"] == \"kh\" or r[\"_field\"] == \"cl2\" or r[\"_field\"] == \"po4\"\n\nsensors = from(bucket: \"reef-data\")\n  |> range(start: -30d, stop: -7d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensor_readings\")\n  |> filter(fn: numericFields)\n  |> aggregateWindow(every: 1d, fn: mean, createEmpty: false)\n\nevents = from(bucket: \"reef-data\")\n  |> range(start: -30d, stop: -7d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"device_events\")\n  |> group(columns: [\"device_type\", \"device_id\", \"_field\"])\n  |> aggregateWindow(every: 1d, fn: last, createEmpty: false)\n\nsettings = from(bucket: \"reef-data\")\n  |> range(start: -30d, stop: -7d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"settings\")\n  |> group(columns: [\"setting_group\", \"setting_name\", \"_field\"])\n  |> aggregateWindow(every: 1d, fn: last, createEmpty: false)\n\nmanual = from(bucket: \"reef-data\")\n  |> range(start: -30d, stop: -7d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"water_quality_manual\")\n  |> filter(fn: manualFields)\n  |> aggregateWindow(every: 1d, fn: mean, createEmpty: false)\n\nunion(tables: [sensors, events, settings, manual])",
  "last_year": "numericFields = (r) => r[\"_field\"] == \"celsius\" or r[\"_field\"] == \"lux\" or r[\"_field\"] == \"ph\" or r[\"_field\"] == \"voltage\"\nmanualFields = (r) => r[\"_field\"] == \"no3\" or r[\"_field\"] == \"no2\" or r[\"_field\"] == \"gh\" or r[\"_field\"] == \"kh\" or r[\"_field\"] == \"cl2\" or r[\"_field\"] == \"po4\"\n\nsensors = from(bucket: \"reef-data\")\n  |> range(start: -365d, stop: -30d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"sensor_readings\")\n  |> filter(fn: numericFields)\n  |> aggregateWindow(every: 1mo, fn: mean, createEmpty: false)\n\nevents = from(bucket: \"reef-data\")\n  |> range(start: -365d, stop: -30d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"device_events\")\n  |> group(columns: [\"device_type\", \"device_id\", \"_field\"])\n  |> aggregateWindow(every: 1mo, fn: last, createEmpty: false)\n\nsettings = from(bucket: \"reef-data\")\n  |> range(start: -365d, stop: -30d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"settings\")\n  |> group(columns: [\"setting_group\", \"setting_name\", \"_field\"])\n  |> aggregateWindow(every: 1mo, fn: last, createEmpty: false)\n\nmanual = from(bucket: \"reef-data\")\n  |> range(start: -365d, stop: -30d)\n  |> filter(fn: (r) => r[\"_measurement\"] == \"water_quality_manual\")\n  |> filter(fn: manualFields)\n  |> aggregateWindow(every: 1mo, fn: mean, createEmpty: false)\n\nunion(tables: [sensors, events, settings, manual])"
}
